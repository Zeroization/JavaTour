# å­—ç¬¦ä¸²

Javaæ²¡æœ‰å†…ç½®çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œè€Œæ˜¯æä¾›äº†ä¸€ä¸ªé¢„å®šä¹‰ç±»ï¼Œå› æ­¤å«åš`String`ã€‚æ¥ä¸‹æ¥çœ‹çœ‹ä¸€äº›å­—ç¬¦ä¸²ç±»çš„å¸¸ç”¨æ“ä½œï¼š

## å­ä¸²

Stringç±»çš„ `subString(a, b)` æ–¹æ³•å¯ä»¥å¯¹ä¸€ä¸ªè¾ƒé•¿çš„å­—ç¬¦ä¸²æˆªå–å‡ºä¸€ä¸ªä»aå¼€å§‹åˆ°b(ä¸åŒ…æ‹¬)çš„å­ä¸²ã€‚

```java
String str1 = "Hello!";
String str2 = str1.subString(0, 3);	//Hel
```

## æ‹¼æ¥

### + å·æ‹¼æ¥

å¯ä»¥ä½¿ç”¨ â€œ+â€ å·æ¥å®Œæˆå¯¹ å­—ç¬¦ä¸²å’Œå­—ç¬¦ä¸² æˆ– å­—ç¬¦ä¸²å’Œå…¶ä»–ç±»å‹å€¼ çš„æ‹¼æ¥ï¼ˆåè€…ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼‰ã€‚

```java
//String + String
String stra = "hel";
String strb = "lo!";
String strc = stra + strb;	//hello!
//String + Others
String pg = "PG";
int age = 18;
String rating = pg + age;	//PG18
```

### é™æ€joinæ–¹æ³•

æ­¤æ–¹æ³•å¯ä»¥æŠŠå¤šä¸ªå­—ç¬¦ä¸²æ”¾åˆ°ä¸€èµ·ï¼Œä¸”ç”¨ä¸€ä¸ªç•Œå®šç¬¦åˆ†éš”ï¼š

```java
String str = String.join("|", "a", "b", "c");//a|b|c
```

### [Java11] repeatæ–¹æ³•

å’Œåå­—ä¸€æ ·ï¼Œå¯ä»¥é‡å¤æŸå­—ç¬¦ä¸²næ¬¡ï¼š

```java
String rep = "a".repeat(3);	//aaa
```

## å­—ç¬¦ä¸²ä¸å¯ä¿®æ”¹

å’ŒC++ä¸ä¸€æ ·ï¼ŒJavaä¸èƒ½ç›´æ¥ä¿®æ”¹å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼ŒæŠŠä¸Šé¢çš„ "hello!" ç»™æ”¹æˆ â€œhelp!â€ å¾—è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š

```java
String strc = "hello!";
strc = strc.subString(0,3) + "p!";
```

javaå­—ç¬¦ä¸²æ›´åƒC++çš„char*æŒ‡é’ˆã€‚å¯¹äºä¸Šè¿°æ“ä½œï¼ŒC++çš„æ“ä½œå¦‚ä¸‹ï¼š

```c++
char* tmp = new char[6];
strncpy(tmp, strc, 3);
strncpy(tmp + 3, "p!", 3);
strc = tmp;
delete[] tmp;
```

## ç›¸ç­‰

`equals`æ–¹æ³•ç”¨æ¥æ£€æµ‹ä¸¤å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ï¼š

```java
stra.equals(strb);
```

è¿”å› true å’Œ false ä¸¤ç»“æœã€‚

`equalsIgnoreCases`æ–¹æ³•åˆ™æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚

## ç©ºä¸²ä¸Nullä¸²

ç©ºä¸² "" æ˜¯é•¿åº¦ä¸º0çš„å­—ç¬¦ä¸²ã€‚è€Œnullä¸²è¡¨ç¤ºç›®å‰æ²¡æœ‰ä»»ä½•å¯¹è±¡ä¸æ­¤ä¸²æœ‰å…³è”ï¼Œé¦–å…ˆè¦æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¸ºnullï¼Œå¦åˆ™ä¼šå¼•å‘é”™è¯¯ã€‚

## ç ç‚¹å’Œä»£ç å•å…ƒ

> ä»£ç è¯¦è§ CodePointAndChar.java

å¦‚æœæˆ‘ä»¬æ‰“ç®—åœ¨å­—ç¬¦ä¸²é‡Œä½¿ç”¨Unicodeå­—ç¬¦ï¼ˆé™¤äº†ASCIIä»¥å¤–çš„ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾—æ³¨æ„æ³¨æ„è¿™ç‚¹ã€‚Unicodeå­—ç¬¦(U+FFFFä»¥åçš„)å¾—éœ€è¦ä¸¤ä¸ªä»£ç å•å…ƒ(char)æ¥è¡¨ç¤ºã€‚é€šè¿‡ä»¥ä¸‹ç¨‹åºæ®µä¼šå˜å¾—æ›´æ˜æ™°ï¼š

```java
String str = "\uD835\uDD4623";//ğ•†23
//length()å¯ä»¥æŸ¥çœ‹å­—ç¬¦ä¸²é•¿åº¦;codePointCount(a,b)å¯ä»¥æŸ¥çœ‹å­—ç¬¦ä¸²ä»aåˆ°b(ä¸åŒ…å«)çš„ç ç‚¹é•¿åº¦
System.out.println("å­—ç¬¦ä¸²é•¿åº¦ï¼š" + str.length() + " ç ç‚¹é•¿åº¦ï¼š" + str.codePointCount(0, str.length()));
//è¿è¡Œç»“æœï¼š
å­—ç¬¦ä¸²é•¿åº¦ï¼š4 ç ç‚¹é•¿åº¦ï¼š3
```

å¯ä»¥å‘ç°ï¼Œ**ç ç‚¹é•¿åº¦å°±æ˜¯å®é™…é•¿åº¦**ã€‚

```java
//charAt(i)å¯ä»¥è¿”å›ä½ç½®içš„ä»£ç å•å…ƒ
//offsetByCodePoints()å’ŒcodePointAt()å¯ä»¥è¿”å›ç¬¬iä¸ªç ç‚¹
int index = str.offsetByCodePoints(0, 1);
int cp = str.codePointAt(index);
System.out.println("ç¬¬2ä¸ªä»£ç å•å…ƒï¼š" + str.charAt(1) + " ç¬¬2ä¸ªç ç‚¹ï¼š" + cp);
//è¿è¡Œç»“æœï¼š
ç¬¬2ä¸ªä»£ç å•å…ƒï¼š? ç¬¬2ä¸ªç ç‚¹ï¼š50
```

å¯ä»¥å‘ç°ï¼ŒcharAtè¿”å›çš„æ˜¯ğ•†çš„ç¬¬2ä¸ªä»£ç å•å…ƒï¼Œè€Œä¸æ˜¯2ã€‚ï¼ˆç¬¬äºŒä¸ªç ç‚¹çš„ASCIIä¸º50ï¼‰

## StringAPI

é™¤äº†ä»¥ä¸Šçš„ä¸€äº›æ“ä½œå¤–ï¼Œè¿˜æœ‰å¸¸ç”¨çš„APIå¦‚ä¸‹è¡¨ï¼š

| API                                                          | åŠŸèƒ½                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| int compareTo(String other)                                  | ç±»ä¼¼Cçš„strcmp()ã€‚å­—ç¬¦ä¸²åœ¨otherä¹‹å‰è¿”å›è´Ÿæ•°ï¼›ä¹‹åä¸ºæ­£æ•°ï¼›ç›¸ç­‰ä¸º0 |
| boolean isEmpty()<br />boolean isBlank()  [Java11]           | å­—ç¬¦ä¸²æ˜¯ç©ºçš„è¿”å›true<br />å­—ç¬¦ä¸²ç”±ç©ºç™½å­—ç¬¦ç»„æˆè¿”å›true       |
| boolean startsWith(String prefix)<br />boolean endsWith(String suffix) | å­—ç¬¦ä¸²ä»¥prefixå¼€å¤´è¿”å›true<br />ä»¥suffixç»“å°¾è¿”å›true         |
| int indexOf(String str)<br />int indexOf(String str, int fromIndex)<br />int indexOf(int cp)<br />int indexOf(int cp, int formIndex) | è¿”å›ä¸å­—ç¬¦ä¸²stræˆ–ç ç‚¹cpç›¸ç­‰çš„**ç¬¬ä¸€ä¸ª**å­ä¸²çš„å¼€å§‹ä½ç½®ï¼Œ<br />ä»**ç´¢å¼•0**æˆ– fromIndex å¼€å§‹åŒ¹é…ã€‚æ‰¾ä¸åˆ°è¿”å›-1 |
| int lastIndexOf(String str)<br />int lastIndexOf(String str, int fromIndex)<br />int lastIndexOf(int cp)<br />int lastIndexOf(int cp, int formIndex) | è¿”å›ä¸å­—ç¬¦ä¸²stræˆ–ç ç‚¹cpç›¸ç­‰çš„**æœ€åä¸€ä¸ª**å­ä¸²çš„å¼€å§‹ä½ç½®ï¼Œ<br />ä»**å­—ç¬¦ä¸²æœ«å°¾**æˆ– fromIndex å¼€å§‹åŒ¹é…ã€‚æ‰¾ä¸åˆ°è¿”å›-1 |
| String  replace(oldString, newString)                        | è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä½¿ç”¨newStringæ›¿æ¢åŸå§‹å­—ç¬¦ä¸²ä¸­ä¸oldStringåŒ¹é…çš„æ‰€æœ‰<br />å­ä¸²å¾—åˆ°çš„ã€‚å¯ä»¥ä½¿ç”¨ String æˆ– StringBuilder å¯¹è±¡å¾—åˆ° |
| String toLowerCase()<br />String toUpperCase()               | è¿”å›ä¸€ä¸ªå…¨éƒ¨å¤§å†™è½¬å°å†™çš„å­—ç¬¦ä¸²<br />è¿”å›ä¸€ä¸ªå…¨éƒ¨å°å†™è½¬å¤§å†™çš„å­—ç¬¦ä¸² |
| [Java11]<br />String strip()<br />String stripLeading()<br />String stripTrailing() | è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ é™¤äº†åŸæ¥å­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨ï¼Œåªå¤´éƒ¨ï¼Œåªå°¾éƒ¨ï¼Œçš„ç©ºç™½å­—ç¬¦ã€‚<br />æ¯”trim()æ›´å®‰å…¨ |

---

# StringBuilderç±»æ„å»ºå­—ç¬¦ä¸²

å½“æˆ‘ä»¬éœ€è¦ç”±è¾ƒçŸ­çš„å­—ç¬¦ä¸²æ¥æ„å»ºå­—ç¬¦ä¸²æ—¶ï¼Œå¾—ç”¨StringBuilderæˆ–StringBufferç±»ï¼Œä¸¤ç±»çš„APIç›¸åŒï¼Œå°±æ˜¯Bufferé€‚åˆå¤šçº¿ç¨‹ï¼Œæ•ˆç‡è¾ƒæ…¢ï¼›Builderé€‚åˆå•çº¿ç¨‹ï¼Œæ•ˆç‡è¾ƒå¿«ã€‚

## å°ä¾‹å­

å¦‚æœæˆ‘ä»¬æƒ³è¦ç”¨è®¸å¤šå°å­—ç¬¦æ¥æ„å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ­¥éª¤ï¼ˆä»¥StringBuilderä¸ºä¾‹ï¼‰ï¼š

1. æ„é€ ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²æ„å»ºå™¨ï¼š

   ```java
   StringBuilder builder = new StringBuilder();
   ```

2. å½“æ¯æ¬¡éœ€è¦æ·»åŠ å¦å¤–ä¸€éƒ¨åˆ†æ—¶ï¼Œè°ƒç”¨ append æ–¹æ³•ï¼š

   ```java
   builder.append('c');	//åŠ ä¸€ä¸ªä»£ç å•å…ƒ
   builder.append("str");	//åŠ ä¸€ä¸ªå­—ç¬¦ä¸²
   ```

3. æ„é€ å®Œæˆåï¼Œè°ƒç”¨ toString æ–¹æ³•å¾—åˆ°æ„é€ å¥½çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼š

   ```java
   String str = builder.toString();
   ```

## ç›¸å…³API

é™¤äº†ä¸Šè¿°ä¸‰ä¸ªæ–¹æ³•ï¼ˆæ„é€ ï¼Œæ·»åŠ ï¼Œè½¬Stringï¼‰å¤–ï¼Œè¿˜æœ‰ï¼š

| API                                                | åŠŸèƒ½                                                 |
| -------------------------------------------------- | ---------------------------------------------------- |
| int length()                                       | è¿”å›ä»£ç å•å…ƒä¸ªæ•°                                     |
| StringBuilder appendCodePoint(int cp)              | è¿½åŠ ä¸€ä¸ªç ç‚¹ï¼ŒæŠŠå®ƒè½¬æ¢ä¸ºä¸€ä¸ªæˆ–ä¸¤ä¸ªä»£ç å•å…ƒã€‚è¿”å›this |
| void setCharAt(int i, char c)                      | æŠŠç¬¬ i ä¸ªä»£ç å•å…ƒè®¾ç½®ä¸ºc                             |
| StringBuilder insert(int offset, String str)       | åœ¨ offset ä½ç½®æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›this               |
| StringBuilder insert(int offset, char c)           | åœ¨ offset ä½ç½®æ’å…¥ä¸€ä¸ªä»£ç å•å…ƒï¼Œè¿”å›this             |
| StringBuilder delete(int startIndex, int endIndex) | åˆ é™¤ä» startIndex åˆ° endIndex-1 çš„ä»£ç å•å…ƒï¼Œè¿”å›this |

---

# [Java15] æ–‡æœ¬å—

æ–‡æœ¬å—å¯ä»¥å¾ˆå®¹æ˜“çš„æä¾›è·¨å¤šè¡Œçš„å­—ç¬¦ä¸²å­—é¢é‡ã€‚æ–‡æœ¬å—ä»¥ `"""`å¼€å¤´ï¼Œåé¢æ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œå¹¶ä»¥å¦ä¸€ä¸ª `"""`ç»“å°¾ï¼š

```java
//ä¸ç”¨æ‹…å¿ƒå…¬å…±ç¼©è¿›ï¼Œå°†ä¼šè¢«è‡ªåŠ¨å»é™¤
String str = """
	Hello
	World
	""";
```

è¿™æ¯”åŒæ ·å†…å®¹çš„ `"Hello\nWorld\n"` æ›´å®¹æ˜“ç†è§£å’Œè¯»å†™ã€‚å¦‚æœä¸æƒ³è¦æœ€åçš„æ¢è¡Œç¬¦ï¼Œå¯ä»¥ç›´æ¥å°†ç»“å°¾æ”¾åˆ° World çš„åé¢ã€‚

æ­¤ç‰¹æ€§ç‰¹åˆ«é€‚åˆåŒ…å«ç”¨å…¶ä»–è¯­è¨€ç¼–å†™çš„ä»£ç ï¼Œå¦‚ SQL æˆ– HTMLã€‚

